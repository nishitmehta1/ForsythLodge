!function(e,t,n){"use strict";var i=function(){var e=n.body||n.documentElement,e=e.style;return""==e.WebkitTransition?"-webkit-":""==e.MozTransition?"-moz-":""==e.OTransition?"-o-":""==e.transition?"":!1},o=i()===!1?!1:!0,r=function(e,t,n){var o={},r=i();o[r+"transform"]="translateX("+t+")",o[r+"transition"]=r+"transform "+n+"s linear",e.css(o)},a="ontouchstart"in t,d=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,c=function(e){if(a)return!0;if(!d||"undefined"==typeof e||"undefined"==typeof e.pointerType)return!1;if("undefined"!=typeof e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!=e.pointerType)return!0}else if("mouse"!=e.pointerType)return!0;return!1};e.fn.imageLightbox=function(i){var i=e.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",allowedVideos:"youtube.com|youtu.be|vimeo.com|dailymotion.com|dai.ly",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},i),u=e([]),l=e(),f=e(),p=0,s=0,h=0,g=!1,m=function(t){return"a"==e(t).prop("tagName").toLowerCase()&&new RegExp(".("+i.allowedTypes+")$|"+i.allowedVideos,"i").test(e(t).attr("href"))},v=function(){if(!f.length)return!0;var n=.8*e(t).width(),i=.9*e(t).height(),o=new Image;o.src=f.attr("src"),o.onload=function(){if(p=o.width,s=o.height,p>n||s>i){var r=p/s>n/i?p/n:s/i;p/=r,s/=r}f.css({width:p+"px",height:s+"px",top:(e(t).height()-s)/2+"px",left:(e(t).width()-p)/2+"px"})}},w=function(n){if(g)return!1;if(n="undefined"==typeof n?!1:"left"==n?1:-1,f.length){if(n!==!1&&(u.length<2||i.quitOnEnd===!0&&(-1===n&&0==u.index(l)||1===n&&u.index(l)==u.length-1)))return y(),!1;var a={opacity:0};o?r(f,100*n-h+"px",i.animationSpeed/1e3):a.left=parseInt(f.css("left"))+100*n+"px",f.animate(a,i.animationSpeed,function(){x()}),h=0}g=!0,i.onLoadStart!==!1&&i.onLoadStart(),setTimeout(function(){if(new RegExp(i.allowedVideos,"i").test(l[0].href)){f=e("<div>"),f.attr("id","imagelightbox"),f.attr("src",l[0].href);var a=.8*e(t).width(),p=.9*e(t).height(),m=560;if(s=315,m>a||s>p){var x=m/s>a/p?m/a:s/p;m/=x,s/=x}f.css({zIndex:10001,width:m+"px",height:s+"px",top:(e(t).height()-s)/2+"px",left:(e(t).width()-m)/2+"px",backgroundColor:"#333"});var E,b=e("<iframe>"),S=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g,k=/(?:http?s?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,q=/(?:http?s?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video\/)?(.+)/g;S.test(l[0].href)?(E=new RegExp("(?:http?s?://)?(?:www.)?(?:vimeo.com)/?(.+)","g").exec(l[0].href)[1],E="//player.vimeo.com/video/"+E):k.test(l[0].href)?(E=new RegExp("(?:http?s?://)?(?:www.)?(?:youtube.com|youtu.be)/(?:watch\\?v=)?(.+)","g").exec(l[0].href)[1],E="//www.youtube.com/embed/"+E):q.test(l[0].href)&&(E=new RegExp("(?:http?s?://)?(?:www.)?(?:dailymotion.com|dai.ly)/(?:video/)?(.+)","g").exec(l[0].href)[1],E="//www.dailymotion.com/embed/video/"+E.slice(0,7),console.log(E)),b.css({frameBorder:0,width:m+"px",height:s+"px",id:"videoEmbed"}),b.attr("src",E),b.appendTo(f),f.appendTo("body"),b.on("load",function(){g=!1,i.onLoadEnd!==!1&&i.onLoadEnd()})}else{f=e("<img "+i.selector+" />").attr("src",l.attr("href")).load(function(){f.appendTo("body"),v();var t={opacity:1};if(f.css("opacity",0),o)r(f,-100*n+"px",0),setTimeout(function(){r(f,"0px",i.animationSpeed/1e3)},50);else{var a=parseInt(f.css("left"));t.left=a+"px",f.css("left",a-100*n+"px")}if(f.animate(t,i.animationSpeed,function(){g=!1,i.onLoadEnd!==!1&&i.onLoadEnd()}),i.preloadNext){var d=u.eq(u.index(l)+1);d.length||(d=u.eq(0)),e("<img />").attr("src",d.attr("href")).load()}}).error(function(){i.onLoadEnd!==!1&&i.onLoadEnd()});var T=0,C=0,L=0;f.on(d?"pointerup MSPointerUp":"click",function(e){if(e.preventDefault(),i.quitOnImgClick)return y(),!1;if(c(e.originalEvent))return!0;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;l=u.eq(u.index(l)-(m/2>t?1:-1)),l.length||(l=u.eq(m/2>t?u.length:0)),w(m/2>t?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(e){return!c(e.originalEvent)||i.quitOnImgClick?!0:(o&&(L=parseInt(f.css("left"))),void(T=e.originalEvent.pageX||e.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(e){return!c(e.originalEvent)||i.quitOnImgClick?!0:(e.preventDefault(),C=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,h=T-C,void(o?r(f,-h+"px",0):f.css("left",L-h+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(e){return!c(e.originalEvent)||i.quitOnImgClick?!0:void(Math.abs(h)>50?(l=u.eq(u.index(l)-(0>h?1:-1)),l.length||(l=u.eq(0>h?u.length:0)),w(h>0?"right":"left")):o?r(f,"0px",i.animationSpeed/1e3):f.animate({left:L+"px"},i.animationSpeed/2))})}},i.animationSpeed+100)},x=function(){return f.length?(f.remove(),void(f=e())):!1},y=function(){return f.length?void f.animate({opacity:0},i.animationSpeed,function(){x(),g=!1,i.onEnd!==!1&&i.onEnd()}):!1};e(t).on("resize",v),i.quitOnDocClick&&e(n).on(a?"touchend":"click",function(t){f.length&&!e(t.target).is(f)&&y()}),i.enableKeyboard&&e(n).on("keyup",function(e){return f.length?(e.preventDefault(),27==e.keyCode&&y(),void((37==e.keyCode||39==e.keyCode)&&(l=u.eq(u.index(l)-(37==e.keyCode?1:-1)),l.length||(l=u.eq(37==e.keyCode?u.length:0)),w(37==e.keyCode?"left":"right")))):!0});var E=function(t){return m(this)?(t.preventDefault(),g?!1:(g=!1,i.onStart!==!1&&i.onStart(),l=e(this),void w())):!0};return e(n).on("click",this.selector,E),this.each(function(){return m(this)?void(u=u.add(e(this))):!0}),this.switchOff=function(){e(n).off("click",this.selector,E),e(t).off("resize",v)},this.switchImageLightbox=function(e){var t=u.eq(e);if(t.length){var n=u.index(l);l=t,w(n>e?"left":"right")}return this},this.quitImageLightbox=function(){return y(),this},this}}(jQuery,window,document);
//# sourceMappingURL=imagelightbox.min.js.map